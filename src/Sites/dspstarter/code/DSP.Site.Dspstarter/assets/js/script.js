window.DDIGITAL=window.DDIGITAL||{},DDIGITAL.IS_RESPONSIVE=!0,DDIGITAL.IS_EDIT=DDIGITAL.IS_EDIT||!1,function(a,b){"use strict";"undefined"==typeof console&&(window.console={},console.log=console.error=console.info=console.debug=console.warn=console.trace=console.dir=console.dirxml=console.group=console.groupEnd=console.time=console.timeEnd=console.assert=console.profile=console.table=function(){}),DD.bp.options({breakpoints:[{name:"xxs",px:359},{name:"xs",px:480},{name:"s",px:640},{name:"m",px:768},{name:"l",px:1024},{name:"xl",px:1244},{name:"xxl",px:1410}]});var c=b("body");a.INIT={visual:function(b){b=b||c,a.contentModules.init(),a.util.helpers.init(),a.util.device.init(),a.navOffscreen.init(),a.navOnscreen.init(),a.expandCollapse.init(b),a.modal.init(),a.tooltip.init(),a.carousel.init(),a.tabs.init(),a.linkIcons.init(b),a.responsiveTable.init(),a.doWhen.init(),a.video.init(),a.bgVideo.init(),a.map.init(),a.equalHeights.init(b)},functional:function(d){d=d||c,a.forms.validate.init(d),a.forms.sync.init(),a.forms.multiStep.init(d),a.togglePopover.init(),a.autocomplete.init(),a.util.print.init(),a.util.scroll.init(),b(".page-wrap").ddShade(),a.buildInfo.init(),a.IS_EDIT&&b("html").addClass("is-edit")}},a.init=function(){a.INIT.visual(),a.INIT.functional(),a.triggerReady(),b(window.document).on("re-init-all",function(c){var d=b(c.target);a.INIT.visual(d),a.INIT.functional(d)})},b(document).ready(function(){a.init()})}(DDIGITAL,jQuery),window.DD_BUILD=window.DD_BUILD||{},function(a,b){"use strict";a.buildInfo=function(){var a;return a=function(){if(void 0!==DD_BUILD.NUMBER&&void 0!==DD_BUILD.BRANCH){var a=b(".js-buildinfo");0!==a.length&&a.each(function(){var a=b(this);a.removeClass("hidden").find(".middleman.build-number").text(DD_BUILD.NUMBER),a.find(".middleman.datetime").text(DD_BUILD.DATETIME||""),a.find(".middleman.branch").text(DD_BUILD.BRANCH)})}},{init:a}}()}(DDIGITAL,jQuery),function(a,b){"use strict";a.util=a.util||{},a.util.device=function(){var a,c;return a={android:function(){return/Android/i.test(navigator.userAgent)},androidchrome:function(){return window.chrome&&/Android/i.test(navigator.userAgent)},blackberry:function(){return/BlackBerry/i.test(navigator.userAgent)},ios:function(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)},opera:function(){return/Opera Mini/i.test(navigator.userAgent)},windows:function(){return/IEMobile/i.test(navigator.userAgent)},any:function(){return a.android()||a.blackberry()||a.ios()||a.opera()||a.windows()},touch:function(){return"ontouchstart"in window||"onmsgesturechange"in window}},c=function(){a.android()?b("html").addClass("d-android"):a.blackberry()?b("html").addClass("d-blackberry"):a.ios()?b("html").addClass("d-ios"):a.opera()?b("html").addClass("d-opera"):a.windows()?b("html").addClass("d-windows"):b("html").addClass("d-other"),a.any()&&b("html").addClass("d-any"),a.touch()&&b("html").addClass("d-touch")},{is:a,init:c}}()}(DDIGITAL,jQuery),function(a){"use strict";a.util=a.util||{},a.util.formatter=function(){var a,b,c,d;return a=function(a,b,c,d){var e,f=isNaN(b)?2:Math.abs(b),g=c||".",h="undefined"==typeof d?",":d,i=a<0?"-":"",j=parseInt(a=Math.abs(a).toFixed(f),10)+"";return e=(e=j.length)>3?e%3:0,i+(e?j.substr(0,e)+h:"")+j.substr(e).replace(/(\d{3})(?=\d)/g,"$1"+h)+(f?g+Math.abs(a-j).toFixed(f).slice(2):"")},b=function(a,b){b=Math.pow(10,b);for(var c=["k","m","b","t"],d=c.length-1;d>=0;d-=1){var e=Math.pow(10,3*(d+1));if(e<=a){a=Math.round(a*b/e)/b,a+=c[d];break}}return a},c=function(a,b){return Math.round(a*Math.pow(10,b))/Math.pow(10,b)},d=function(a){var b=!isNaN(a-0)&&null!==a&&""!==a&&a!==!1;return b},{toCurrency:a,abbrNum:b,roundNum:c,isNumber:d}}()}(DDIGITAL),function(a,b){"use strict";a.util=a.util||{},a.util.helpers=function(){var c,d,e,f,g;return c=function(){a.IS_RESPONSIVE=!1,DD.bp.options({isResponsive:!1})},d=function(){b("textarea[maxlength]").each(function(){var a=b(this),c=parseInt(a.attr("maxlength"),10);isNaN(c)===!1&&a.on("keyup.textareaMaxlength blur.textareaMaxlength",function(){var a=b(this).val();a.length>c&&b(this).val(a.substr(0,c))})})},f=function(){b("li:last-child, th:last-child, td:last-child, tr:last-child").addClass("last-child"),b("tr:nth-child(2n)").addClass("odd")},e=function(){var a=function(a){var c=b('label[for="'+a.attr("id")+'"]');return a.prop("checked")?a.add(c).addClass("is-checked"):a.add(c).removeClass("is-checked"),a};b("input:radio, input:checkbox").each(function(){var c=b(this);"radio"===c.prop("type")?b('input[name="'+c.prop("name")+'"]').on("change.checkboxPolyfill",function(){a(c)}):"checkbox"===c.prop("type")&&c.change(function(){a(c)}),a(c)})},g=function(){b(".lt-ie10").length&&d(),b(".lt-ie9").length&&(c(),f(),e()),b.placeholder&&!Modernizr.input.placeholder&&b("input, textarea").placeholder(),b.fn.noScrollFocus=function(){var a=window.scrollX,c=window.scrollY;return this.focus(),0===b(".lt-ie10").length&&window.scrollTo(a,c),this}},{init:g}}()}(DDIGITAL,jQuery),function(a,b){"use strict";a.util=a.util||{},a.util.print=function(){var a,c;return a={PRINT:".js-print"},c=function(){b(document).on("click.print",a.PRINT,function(a){a.preventDefault(),window.print()})},{init:c}}()}(DDIGITAL,jQuery),function(a,b){"use strict";a.util=a.util||{},a.util.scroll=function(){var a,c,d,e,f;return a={SCROLLTO:".scrollto"},c={OFFSET:"data-scroll-offset",TABTO:"data-scroll-tabto",HASH:"data-scroll-hash"},d=function(a,c,d,e){var f=d,g=!1;if(c="string"==typeof c?c.substring(c.indexOf("#")+1):null,null===f){var h=b(document).scrollTop(),i=Math.abs(a-h),j=2e3,k=1e3;f=i>j?k:a>h?(1-h/a)*k:(1-a/h)*k}b("html").velocity("stop").velocity("scroll",{offset:a,duration:f,complete:function(){g||(g=!0,"string"==typeof c&&(window.history&&window.history.pushState?window.history.pushState(null,null,"#"+c):window.location.hash=c),"function"==typeof e&&e())}})},e=function(a){var e=b(this),f=e.attr("href"),g=parseInt(e.attr(c.OFFSET),10)||0,h="true"===e.attr(c.TABTO),i="false"!==e.attr(c.HASH);f=f.substr(f.indexOf("#")+1);var j=b("#"+f),k=i?f:null;0===j.length&&(j=b('a[name="'+f+'"]')),0!==j.length&&(a.preventDefault(),h?d(j.offset().top+g,k,null,function(){j.eq(0).noScrollFocus()}):d(j.offset().top+g,k))},f=function(){b("body").off("click.scrollto").on("click.scrollto",a.SCROLLTO,e)},{page:d,init:f}}()}(DDIGITAL,jQuery),function(a,b){"use strict";a.autocomplete=function(){var c;return c=function(){var c={};b(".js-autocomplete").each(function(d,e){var f=b(e);a.forms.validate.setValidationDelay(f.find("input"),200),f.ddAutocomplete(c)})},{init:c}}()}(DDIGITAL,jQuery),function(a,b){"use strict";a.bgVideo=function(){var c,d,e;return c={CONTAINER:".js-bg-video"},d={MP4:"data-mp4-video-src",WEBM:"data-webm-video-src",POSTER:"data-poster-src"},e=function(){b(c.CONTAINER).each(function(c,e){var f=b(e),g={mp4:f.attr(d.MP4),webm:f.attr(d.WEBM),poster:f.attr(d.POSTER)};f.vide(g,{muted:!0,loop:!0,autoplay:!0,posterType:"jpg"}),a.util.device.is.ios()&&f.find("video").remove()})},{init:e}}()}(DDIGITAL,jQuery),function(a,b){"use strict";a.carousel=function(){var a,c,d,e,f,g,h,i,j,k,l;return a={DEFAULT_OPTIONS:{infinite:!1,cssEase:"ease-out",dots:!0,speed:400,adaptiveHeight:!1}},c={CAROUSEL_TYPE:"data-carousel-type",HAS_CAROUSEL:"has-carousel"},d={IS_DARK:"is-dark",DOTS_WRAPPER:"slick-dots-wrapper",LAYOUT_PADDING:"l-padding"},e={CAROUSEL:".js-carousel",CAROUSEL_SLIDE:".slick-slide",CAROUSEL_TRACK:".slick-track",UI:{DOTS:".slick-dots"}},f=function(a,c){if("hero"===c){var f=b("<div />",{"class":d.DOTS_WRAPPER,html:b("<div />",{"class":d.LAYOUT_PADDING})});a.find(e.UI.DOTS).wrap(f)}},g=function(a,b){b.hasClass(d.IS_DARK)?a.addClass(d.IS_DARK):a.removeClass(d.IS_DARK)},h=function(d){var f=d.attr(c.CAROUSEL_TYPE)||"default",h={};return h={type:f,opts:a.DEFAULT_OPTIONS,events:{beforeChange:function(a,c,d,f){var h=b(this),i=h.find(e.CAROUSEL_SLIDE).eq(f);g(h,i)}}},("hero"===f||"default"===f)&&h},i=function(a){var c;c=function(){a.find(e.CAROUSEL_SLIDE).css("height","");var b=parseInt(a.find(e.CAROUSEL_TRACK).height(),10);a.find(e.CAROUSEL_SLIDE).css("height",b+"px")},b(window).on("resize.carousel",b.debounce(250,c)),c()},j=function(d){var j=h(d);if(d.data(c.HAS_CAROUSEL))return void console.warn("Carousel is already enabled");if(b.extend(j,a.DEFAULT_OPTIONS,j.opts),d.slick(j),d.data(c.HAS_CAROUSEL,!0),g(d,d.find(e.CAROUSEL_SLIDE).eq(0)),f(d,j.type),j.adaptiveHeight!==!0&&i(d,j),j.events)for(var k in j.events)j.events.hasOwnProperty(k)&&d.on(k,j.events[k])},k=function(a){a.data(c.HAS_CAROUSEL)&&a.slick("unslick"),a.data(c.HAS_CAROUSEL,!1)},l=function(){var a;a=function(){b(e.CAROUSEL).each(function(a,d){var e=b(d),f=h(e);return f===!1?void k(e):void(e.data(c.HAS_CAROUSEL)===!1&&j(e))})},b(e.CAROUSEL).each(function(a,d){b(d).data(c.HAS_CAROUSEL,!1)}),a()},{init:l}}()}(DDIGITAL,jQuery),function(a,b){"use strict";a.contentModules=function(){var a,c,d,e,f,g,h;return a={SMALL_WIDTH:350,MEDIUM_WIDTH:500,LARGE_WIDTH:800},c={IS_SMALL:"is-small",IS_MEDIUM:"is-medium",IS_LARGE:"is-large"},d={CM:".cm, .hm"},e=function(a){a.removeClass(c.IS_SMALL).removeClass(c.IS_MEDIUM).removeClass(c.IS_LARGE)},f=function(){b(d.CM).each(function(a,c){e(b(c))})},g=function(){b(d.CM).each(function(d,f){var g,h=b(f);e(h),g=h.width(),g>=a.SMALL_WIDTH&&g<a.MEDIUM_WIDTH?(h.addClass(c.IS_SMALL),h.removeClass(c.IS_MEDIUM).removeClass(c.IS_LARGE)):g>=a.MEDIUM_WIDTH&&g<a.LARGE_WIDTH?(h.addClass(c.IS_MEDIUM),h.removeClass(c.IS_SMALL).removeClass(c.IS_LARGE)):g>=a.LARGE_WIDTH&&(h.addClass(c.IS_LARGE),h.removeClass(c.IS_SMALL).removeClass(c.IS_MEDIUM))})},h=function(){"object"!=typeof enquire&&console.error("DDIGITAL.contentModules: enquire.js is required."),enquire.register(DD.bp.get("0,xxs"),{match:f}).register(DD.bp.get("xs,s"),{match:function(){b(window).on("resize.cm",b.throttle(200,g))},unmatch:function(){b(window).off("resize.cm",b.throttle(200,g))}}).register(DD.bp.get("m,m"),{match:g}).register(DD.bp.get("l,l"),{match:g}).register(DD.bp.get("xl,xl"),{match:g}).register(DD.bp.get("xxl"),{match:g}),DD.bp.is("xs")&&g()},{init:h}}()}(DDIGITAL,jQuery),function(a,b){"use strict";a.doWhen=function(){var a;return a=function(){b(document).doWhen()},{init:a}}()}(DDIGITAL,jQuery),function(a,b){"use strict";a.equalHeights=function(){var c;return b.ddEqualHeights.addType("eqh-demo",{numItemsPerRow:function(){return b(".l-three-column").length?a.IS_RESPONSIVE?{"0,xs":1,"s,l":2,xl:3}:2:a.IS_RESPONSIVE?{"0,xs":1,"s,m":2,"l,xl":3,xxl:4}:3}}),b.ddEqualHeights.addType("sl-list-has-2-items",{itemsSelector:".cm",numItemsPerRow:function(){return a.IS_RESPONSIVE?{"0,m":1,l:2}:2}}),b.ddEqualHeights.addType("sl-list-has-3-items",{itemsSelector:".cm",numItemsPerRow:function(){return a.IS_RESPONSIVE?{"0,m":1,l:3}:3}}),b.ddEqualHeights.addType("sl-list-has-4-items",{itemsSelector:".cm",numItemsPerRow:function(){return a.IS_RESPONSIVE?{"0,m":1,l:4}:4}}),b.ddEqualHeights.addType("sl-list-landing",{itemsSelector:".cm",sectionSelector:".title, > ul",numItemsPerRow:function(){return a.IS_RESPONSIVE?{"0,m":1,l:2}:2}}),b.ddEqualHeights.addType("nav-onscreen",{numItemsPerRow:function(){return a.IS_RESPONSIVE?{"0,m":1,l:4}:4}}),b.ddEqualHeights.addType("cm-site-map",{numItemsPerRow:function(){return a.IS_RESPONSIVE?{"0,xs":1,"s,m":2,l:4}:4}}),b.ddEqualHeights.addType("hero-links",{itemsSelector:".link-item",sectionSelector:".content",numItemsPerRow:function(){return a.IS_RESPONSIVE?{"0,xxs":1,"xs,m":2,l:4}:4}}),c=function(a){var c=a?b("[data-heights-type]",a):b("[data-heights-type]");c.ddEqualHeights()},{init:c}}()}(DDIGITAL,jQuery),function(a,b){"use strict";a.expandCollapse=function(){var a,c;return a=function(a,d){var e="string"==typeof d;a.find(".js-ec").trigger("destroy.ddExpandCollapse"),e&&(a.find(".js-ec").each(function(a,c){b(c).attr("id",b(c).attr("id")+d)}),a.find(".js-ec-link").each(function(a,c){var e=b(c).attr("href");e=e.substring(e.indexOf("#")),b(c).attr("href",e+d)})),c(a)},c=function(a){var c=a?b(".js-ec",a):b(".js-ec");c.ddExpandCollapse();var d=a?b(".js-ec-grouped",a):b(".js-ec-grouped");d.ddExpandCollapse({group:"group-2"});var e=a?b(".js-ec-scroll",a):b(".js-ec-scroll");e.ddExpandCollapse({durations:{scroll:1e3},animations:{scrollPage:function(a,c,d){var e;a.css({display:"block"}),e=a.offset().top+c.scrollOffset,a.css({display:""}),b("html").velocity("stop").velocity("scroll",{offset:e,duration:c.durations.scroll,complete:d})}}})},{reset:a,init:c}}()}(DDIGITAL,jQuery),function(a,b){"use strict";a.linkIcons=function(){var a,c,d=".link-icons-disabled";return a=function(a,b,c,e){var f,g;if(e=e||!1,(e||!(a.filter(d).length>0||a.closest(d).length>0))&&(1!==a.children().length||""!==a.text()||1!==a.children("img").length)){if(f=a.find(".link-icon"),0===f.length)if(a.hasClass("link-caret-block"))a.append('<span class="link-icon"></span>');else{var h=a.clone().children().remove().end().text(),i=h.split(" "),j=i.pop();j='<span class="link-icon">'+j+'<span class="vh"></span></span>',i.push(j),i=i.join(" ");var k=a.html();a.html(k.replace(h,i)),f=a.find(".link-icon")}g=f.find(".vh"),g.text(g.text()+c),a.addClass(b)}},c=function(c){var d=c?b("a",c):b("a");d.each(function(){var c=b(this),d=c.attr("href");d&&c.hasClass("link-caret")&&a(c,"link-caret","",!0)})},{init:c}}()}(DDIGITAL,jQuery),function(a,b){"use strict";a.map=function(){var a,c,d,e,f,g,h,i,j=[];return a={MAPS_API_SRC:"https://maps.googleapis.com/maps/api/js?callback=DDIGITAL.map.createMaps&key="},c={MARKER_LIST:".marker-list li",MAP_CONTAINER:".map-container",MAP_MODULE:".cm-map",MARKER_LIST_ITEM:{GEO_NAME:".geo-name",GEO_LATITUDE:".p-latitude",GEO_LONGITUDE:".p-longitude"},MAP_CONTENT:".content"},d={API_KEY:"data-map-api-key",GEO_HREF:"data-geo-href"},h=function(c){if(a.MAPS_API_SRC.split("key=")[1]||(a.MAPS_API_SRC+=c.attr(d.API_KEY)),0===b('script[src="'+a.MAPS_API_SRC+'"]').length){var e,f;e=document.createElement("script"),e.src=a.MAPS_API_SRC,f=document.getElementsByTagName("script")[0],f.parentNode.insertBefore(e,f)}},f=function(){var a=b(c.MAP_MODULE);b.each(j,function(d,e){var f=b(a[d]),g=f.find(c.MAP_CONTAINER)[0],h=null,j=f.attr("data-initial-zoom"),k=j&&j.length>0?parseInt(j):15,l={zoom:k},m=new google.maps.Map(g,l),n=[];if(e.each(function(a){var d=b(this)[0],e=new google.maps.Marker({position:new google.maps.LatLng(d.latitude,d.longitude),title:d.title});e.addListener("click",function(a){h&&h.close();var b,d,g=-1;for(d=0;d<n.length;d+=1)if(a.latLng===n[d][0].getPosition()){g=d;break}b=f.clone().find(c.MAP_CONTENT).removeClass("vh").find("span.vh").remove().end()[g].outerHTML,h=new google.maps.InfoWindow({content:""+b,maxWidth:300}),h.open(m,e)}),n.push([e,a]),e.setMap(m)}),1!==n.length){var o,p=new google.maps.LatLngBounds;for(o=0;o<n.length;o+=1)p.extend(n[o][0].getPosition());m.fitBounds(p)}else m.setCenter(n[0][0].getPosition());g&&0===b(".d-touch").length&&i(g,m)})},g=function(a){h(a);var d=a.find(c.MARKER_LIST),e=[];e=d.map(function(){var a=b(this);return{latitude:a.find(c.MARKER_LIST_ITEM.GEO_LATITUDE).text(),longitude:a.find(c.MARKER_LIST_ITEM.GEO_LONGITUDE).text(),title:a.find(c.MARKER_LIST_ITEM.GEO_NAME).text()}}),j.push(e)},i=function(a,c){var d,e=2,f=18,g=0,h=!0,i={"pan up":1,"pan down":1,"pan right":1,"pan left":1,"zoom in":1,"zoom out":1,"show street map":1,"show satellite imagery":1};(d=function(){g+=1,g>f||(b(a).find("div").each(function(){var d=this.getAttribute("title");if(d&&(d=b.trim(d.toLowerCase())),i.hasOwnProperty(d)){var e=b(this),f=Math.floor(a.offsetHeight/4),g=Math.floor(a.offsetWidth/4);i[d]=e,e.attr({tabindex:"0",role:"button"}),e.on("keydown.visionAusMaps",function(a){var d=!0,e=a.keyCode||a.which;if(13===e)b(this).trigger("click"),d=!1;else if(40===e)c.panBy(0,g);else if(38===e)c.panBy(0,-g);else if(37===e)c.panBy(-f,0);else{if(39!==e)return;c.panBy(f,0)}d&&(a.preventDefault(),a.stopPropagation())}),function(){var a=!1,b=e.css("border"),c=e.css("margin"),d=e.css("background-color"),f=e.css("opacity");e.on("mouseover.visionAusMaps",function(){a=!0}).on("mouseout.visionAusMaps",function(){a=!1}).on("focus.visionAusMaps",function(){a||e.css({border:"2px solid blue",margin:"-2px","background-color":"transparent",opacity:"1"})}).on("blur.visionAusMaps",function(){e.css({border:b,margin:c,"background-color":d,opacity:f})}),h=!1}()}}),h&&setTimeout(d,1e3*e))})()},e=function(){b(c.MAP_MODULE).each(function(a){var c=b(this);g(c,a)})},{init:e,createMaps:f}}()}(DDIGITAL,jQuery),function(a,b){"use strict";a.modal=function(){var c,d,e,f,g;return c=function(){b.ddModals.dynamicModal.addType("modal-dynamic-example",{mq:"0,s",type:"modal-dynamic-example",callback:function(b){a.expandCollapse.reset(b,"-inmodal")}}),b.ddModals.dynamicModal.addType("modal-collection-header-sort",{mq:"0,xl",type:"modal-collection-header-sort",callback:function(){}}),b.ddModals.dynamicModal.addType("modal-search-facets",{mq:"0,s",type:"modal-search-facets",callback:function(b){a.expandCollapse.reset(b,"-inmodal")}})},d=function(a,c,d){b.ddModals.open(a,c,d)},e=function(a){b.ddModals.close(a)},f=function(){return b.ddModals.isOpen()},g=function(){c(),b(".js-modal-container").ddModals({repositionModalOnEvent:"collapsed.ddExpandCollapse expanded.ddExpandCollapse",preOpen:function(){b(".js-nav-offscreen").trigger("close.offscreen")}})},{open:d,close:e,isOpen:f,init:g}}()}(DDIGITAL,jQuery),function(a,b){"use strict";a.responsiveTable=function(){var a={MENU_BUTTON:"responsive-table-toggle-menu-btn cta is-secondary is-small",DO_COLUMN_TOGGLE:"responsive-table-column-toggling"},c=function(){b(".js-responsive-table").each(function(c,d){var e={classes:{columnToggle:{menuButton:a.MENU_BUTTON}}};b(d).hasClass(a.DO_COLUMN_TOGGLE)&&(e.columnToggle=!0),b(d).ddResponsiveTable(e)})};return{init:c}}()}(DDIGITAL,jQuery),function(a,b){"use strict";a.tabs=function(){var a,c;return a={TABS:".js-tabs",TAB_EC_TITLE:".tab-ec-title",TAB_EC_CONTENT:".tab-ec-content"},c=function(){b(a.TABS).each(function(c,d){var e=b(d);e.ddTabs(),e.find(a.TAB_EC_TITLE).length>0&&e.on("tabChanged.ddTabs",function(b,c,d,e){b.stopPropagation(),e.find(a.TAB_EC_CONTENT).trigger("collapse.ddExpandCollapse"),d.find(a.TAB_EC_CONTENT).trigger("expand.ddExpandCollapse")})})},{init:c}}()}(DDIGITAL,jQuery),function(a,b){"use strict";a.togglePopover=function(){var a,c,d,e,f,g,h;return a={POPOVER_ID:"data-popover-id",IS_ANIMATING:"popover-is-animating"},c={IS_ACTIVE:"is-active",IS_READY:"is-ready"},d={TOGGLE:".js-popover-toggle"},g=function(d,e){d.data(a.IS_ANIMATING)!==!0&&(d.data(a.IS_ANIMATING,!0),e.removeClass(c.IS_ACTIVE),d.removeClass(c.IS_ACTIVE).find('input[type="search"]').val(""),DD.a11y.tabInsideContainer.unset(),DD.a11y.onEscape.unset(),DD.a11y.onClickOutside.unset(),e.focus(),b.ddShade.isAnimating()?(b.ddShade.setBehindHeader(!1),d.removeClass(c.IS_READY),d.data(a.IS_ANIMATING,!1)):b.ddShade.opacity(0,150,!0,function(){b.ddShade.setActive(!1),b.ddShade.setBehindHeader(!1),d.removeClass(c.IS_READY),d.data(a.IS_ANIMATING,!1)}))},f=function(d,e){if(d.data(a.IS_ANIMATING)!==!0){d.data(a.IS_ANIMATING,!0);var f=function(){g(d,e)};d.addClass(c.IS_READY),e.addClass(c.IS_ACTIVE),b.ddShade.setBehindHeader(!0),b.ddShade.setActive(!0),DD.a11y.onEscape.set(f),DD.a11y.onClickOutside.set(d,f),b.ddShade.opacity(.75,150,!1,function(){d.addClass(c.IS_ACTIVE),DD.a11y.tabInsideContainer.set(d,!0),d.find('input[type="search"]').focus(),d.data(a.IS_ANIMATING,!1)})}},e=function(d){d.preventDefault();var e=b(this),h=e.attr(a.POPOVER_ID),i=b(document.getElementById(h));return i.hasClass(c.IS_ACTIVE)?void g(i,e):void f(i,e)},h=function(){b(document).on("click.togglePopover",d.TOGGLE,e)},{init:h}}()}(DDIGITAL,jQuery),function(a,b){"use strict";a.tooltip=function(){var a;return a=function(){b(".js-tooltip").ddTooltip()},{init:a}}()}(DDIGITAL,jQuery),function(a,b){"use strict";a.video=function(){var a,c,d;a={IFRAME_API_SRC:"https://www.youtube.com/iframe_api"},c={YOUTUBE_VARIANT:".cm-video.youtube"};var e={};return d=function(){var d=[];0!==b(c.YOUTUBE_VARIANT).length&&(b(c.YOUTUBE_VARIANT).each(function(e){var f,g,h,i=b(this),j=i.find(".video").attr("data-youtube-id");if(g=b("<a />",{id:"v-skip-"+e+"-top",href:"#v-skip-"+e+"-bot","class":"vh focusable",text:"Skip to below video"}),h=b("<a />",{id:"v-skip-"+e+"-bot",href:"#v-skip-"+e+"-top","class":"vh focusable",text:"Skip to above video"}),i.find(".intrinsic-wrap").before(g),i.find(".intrinsic-wrap").after(h),i.find(".video").attr("id",j+"-video-"+e),f=i.find(".video").attr("id"),j&&0!==j.length){if(0===b('script[src="'+a.IFRAME_API_SRC+'"]').length){var k,l;k=document.createElement("script"),k.src=a.IFRAME_API_SRC,l=document.getElementsByTagName("script")[0],l.parentNode.insertBefore(k,l)}!function(a,e){var f={height:"100%",width:"100%",videoId:a,videoElId:e,events:{onReady:function(){b(document.getElementById(e)).css("opacity",1)},onStateChange:function(a){b(document.getElementById(e)).closest(c.YOUTUBE_VARIANT).trigger("youtubeStateChange.video",a)}}};d.push(f)}(j,f)}}),window.onYouTubeIframeAPIReady=function(){d.forEach(function(a){e[a.videoId]=new YT.Player(a.videoElId,a)})})},{init:d,youtubeDictionary:e}}()}(DDIGITAL,jQuery),function(a){"use strict";a.forms=a.forms||{},a.forms.decorator=function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;return b={SUMMARY:{TYPES:{ERROR:"error",WARNING:"warning",INFO:"info",SUCCESS:"success"},SCROLL_TO:!0},DATA:{DISABLED_ITEMS:"form-disabled-items"}},c={IS_VALID:"is-valid",IS_ERROR:"is-error",IS_SUCCESS:"is-success",IS_INFO:"is-info",IS_WARNING:"is-warning",IS_LOADING:"is-loading",SUMMARY:"form-summary",SUMMARY_TITLE:"form-summary-title",ERROR:"error"},d={FORM:".js-validate",SUMMARY:".js-validate-summary",SUMMARY_INNER:".form-summary",CTRL_HOLDER:".ctrl-holder",CTRLS:".ctrls",LABEL:"> label, > .label",LEGEND:"legend, .legend",STATUS_MSG:".status-msg",ELEMENTS:":input, select"},e=function(){var a;return a=function(a,b){a.css({display:"none",opacity:0}),a.velocity("slideDown",{duration:150}).velocity({opacity:1,duration:200,onComplete:b})},{showSummary:a}}(),f=function(){return d},g=function(a){return $(a).closest(d.FORM)},h=function(a,b){return b=b||!1,$(a).closest(d.CTRLS).length>0&&!b?$(a).closest(d.CTRLS).closest(d.CTRL_HOLDER):$(a).closest(d.CTRL_HOLDER)},i=function(a){var b,c,e=a.find(d.LABEL).filter(":visible"),f=a.closest("fieldset").find(d.LEGEND).text();return c=function(a){return a.clone().children().remove().end().text().replace(/^\s+|\s+$/g,"")},0===a.find(d.LABEL).length&&1===a.find(".option").length&&(e=a.find(".option > label")),a.closest(d.CTRLS).length>0&&(e=a.closest(d.CTRL_HOLDER).find(d.LABEL)),b=c(e),{formLabel:b,groupLabel:b+"_"+f}},j=function(a){var b=h(a);return b.find(d.ELEMENTS)},k=function(a){var b=j(a);return b.first().is(a)},l=function(){var f,g,j,l,m,n,o,p;return f=function(b){var c,d,e,f=b.element,g=$(b.element),j=h(b.element),l=$("<li />");if(!a.forms.validate.isInGroup(f)||k(g))return e=i(j),c=$("<a />",{href:"#"+g.attr("id"),html:b.message}),d=$("<strong />",{text:e.formLabel+": "}),c.prepend(d),l.append(c),l},n=function(a,b){if(a!==!1){var d=$("<div />",{"class":c.SUMMARY_TITLE,html:$("<h2 />",{text:a})});b.append(d)}},o=function(a,b){if(a!==!1){var c=$("<p />",{text:a});b.append(c)}},p=function(a,b){if(0!==a.length){var c,d,e="The following",g=0;c=$("<ul />");for(var h=0,i=a.length;h<i;h+=1){var j=f(a[h]);"object"==typeof j&&(c.append(j),g+=1)}e+=g>1?" "+g+" fields contain errors:":" field contains an error:",d=$("<p />",{text:e}),b.append(d),b.append(c)}},g=function(a,d,e,f){if(e=e||!1,f=f||!1,0===d.length&&e===!1&&f===!1)return!1;var g,h=[c.SUMMARY];return a===b.SUMMARY.TYPES.ERROR?h.push(c.IS_ERROR):a===b.SUMMARY.TYPES.WARNING?h.push(c.IS_WARNING):a===b.SUMMARY.TYPES.INFO?h.push(c.IS_INFO):a===b.SUMMARY.TYPES.SUCCESS&&h.push(c.IS_SUCCESS),g=$("<div />",{"class":h.join(" "),tabindex:"-1"}),n(e,g),o(f,g),p(d,g),g},j=function(b){var e,f,g=b.find(d.SUMMARY),h=$(document).scrollTop(),i=h+$(window).height();return f=function(){g.find("."+c.SUMMARY).eq(0).focus()},e=g.offset().top-50,e>h&&e<i?void f():void a.util.scroll.page(e,null,250,f)},l=function(a,c,f,h,i,k,l){h=h||!1,i=i||!1,k=k||b.SUMMARY.SCROLL_TO,l=l||!1;var n=c.find(d.SUMMARY);if(0!==n.length)if(f=f||[],f.length>0||h||i){var o=g(a,f,h,i);n.html(o),k&&j(c),l||e.showSummary(n)}else m(c)},m=function(a){a.find(d.SUMMARY).empty()},{scrollTo:j,add:l,remove:m}}(),m=function(){var b;return b=function(b){if(b.length>0)for(var c=0,d=b.length;c<d;c+=1){var e=b[c],f=a.forms.validate.getValidatorFromElement(e.element);f?f.showLabel(e.element,e.message):n(r(e.message),e.element),q(e.element),o(e.element)}},{add:b}}(),n=function(a,b){var c=h(b),e=c.find(d.STATUS_MSG);e.html(a)},o=function(a){var b=h(a);b.removeClass(c.IS_VALID).addClass(c.IS_ERROR)},p=function(a){var b=h(a);b.addClass(c.IS_VALID).removeClass(c.IS_ERROR)},q=function(a){$(a).attr("aria-invalid","true")},r=function(a){return $("<div />",{"class":c.ERROR,html:a})},s=function(a,c){var e=function(a,b){a.prop("disabled",b)};if(c){var f=a.find(d.ELEMENTS).not(":disabled");a.data(b.DATA.DISABLED_ITEMS,f),e(f,!0)}else{var g=a.data(b.DATA.DISABLED_ITEMS);g&&e(g,!1)}},t=function(a,b){a.attr("aria-busy",b),b?a.addClass(c.IS_LOADING):a.removeClass(c.IS_LOADING)},{getSelectors:f,getFormFromElement:g,getCtrlHolderFromElement:h,getLabelTextFromCtrlHolder:i,getCtrlsInGroup:j,isFirstInGroup:k,formSummary:l,inlineErrors:m,errorPlacement:n,highlight:o,unhighlight:p,addAriaInvalid:q,createErrorMessage:r,setDisabledState:s,setLoadingState:t}}()}(DDIGITAL),function(a,b){"use strict";var c=function(a,c,d){this.$form=a,this.validator=this.$form.data("validator"),this.$ctrl=c,this.defaults={debounce:100},this.settings=b.extend(!0,this.settings,this.defaults,d)};c.prototype={previousValue:null,validator:null,settings:{},init:function(){return this.$ctrl.data("elementTracker.initialised")!==!0&&(this.isGroup=a.forms.validate.isInGroup(this.$ctrl),this.isGroup?a.forms.decorator.getCtrlsInGroup(this.$ctrl).first().is(this.$ctrl)&&this._trackGroup():("text"!==this.$ctrl[0].type&&"password"!==this.$ctrl[0].type&&"SELECT"!==this.$ctrl[0].tagName||this._trackGeneric(),"checkbox"===this.$ctrl[0].type&&this._trackCheckbox(),"radio"===this.$ctrl[0].type&&this._trackRadio()),void this.$ctrl.data("elementTracker.initialised",!0))},_isValid:function(){var a=!0;return this.validator.errorMap.hasOwnProperty(this.$ctrl[0].name)&&(a=!1),a},_isDirty:function(){return void 0!==this.validator.submitted[this.$ctrl[0].name]},_emitSuccess:function(){this.$ctrl.trigger("element-success.track",[this.$ctrl])},_emitError:function(){var a="";if(this.isGroup)a=b("#"+this.$ctrl[0].id+"-error").text();else try{a=this.validator.errorMap[this.$ctrl[0].id]}catch(c){return!1}this.$ctrl.trigger("element-error.track",[this.$ctrl,a])},_trackGeneric:function(){function a(){var a=c.$ctrl.val();return c.previousValue!==a&&(""!==c.$ctrl.val()&&c._isValid()&&c._emitSuccess(),""===c.$ctrl.val()&&!c._isDirty()||c._isValid()||c._emitError(),void(c.previousValue=a))}var c=this;this.$ctrl.on("change.track",this.settings.debounce!==!1?b.debounce(this.settings.debounce,a):a)},_trackCheckbox:function(){function a(){var a=c.$ctrl.is(":checked");return c.previousValue!==a&&(c.$ctrl.is(":checked")&&c._isValid()&&c._emitSuccess(),c.$ctrl.is(":checked")||c._isValid()||c._emitError(),void(c.previousValue=a))}var c=this;this.$ctrl.on("change.track",this.settings.debounce!==!1?b.debounce(this.settings.debounce,a):a)},_trackRadio:function(){function a(){var a=b('input[name="'+c.$ctrl[0].name+'"]:checked');a.length&&c._isValid()&&c._emitSuccess(),a.length||c._isValid()||c._emitError()}var c=this;this.$ctrl.on("change.track",this.settings.debounce!==!1?b.debounce(this.settings.debounce,a):a)},_trackGroup:function(){function c(){var c=!0,g=!1,h=!1,i=a.forms.validate.isGroupValid(f),j="";return e.each(function(){var a=b(this);a.is(":checkbox")||a.is(":radio")?(g=!0,a.is(":checked")&&(h=!0),a.is(":checkbox")&&a.is(":checked")&&(j+=a[0].name),a.is(":radio")&&(j+=b('input[name="'+a[0].name+'"]').val())):(""!==a.val()&&null!==a.val()||(c=!1),j+=a.val())}),d.previousValue!==j&&(c===!0&&i?g?h&&d._emitSuccess():d._emitSuccess():i||d._emitError(),void(d.previousValue=j))}var d=this,e=a.forms.decorator.getCtrlsInGroup(this.$ctrl),f=a.forms.decorator.getCtrlHolderFromElement(this.$ctrl,!1);e.each(function(){var a=b(this);a.on("change.track",d.settings.debounce!==!1?b.debounce(d.settings.debounce,c):c)})}},a.forms.ElementTracker=c}(DDIGITAL,jQuery),function(a,b){"use strict";a.forms=a.forms||{},a.forms.multistep=a.forms.multistep||{},a.forms.multistep.mixins=a.forms.multistep.mixins||{},a.forms.multiStep=function(){var c,d,e;return e=function(b,c,e){var f;f=new a.forms.multistep.ProgressBar(b,{onStepClick:function(a,b){a.preventDefault(),d.switchStep(b)}}),f.init(e),c.on("step-change.liveform",function(a,b){f.setState(b)})},c=function(c){c=c||b("body"),c.find(".js-multistep").each(function(){var f,g,h=b(this),i=h.data("form-multistep"),j={form:i,currentStep:h.data("form-multistep-current-step")};switch(f=a.forms.multistep.service.init(i,{}),g=a.forms.multistep.router.init({onStateChange:function(a){var b=a.state;d.switchStep(b)}}),c.find(".js-form-progress").each(function(){e(b(this),h,f)}),void 0!==h.data("form-multistep-partial")&&(j.partial=h.data("form-multistep-partial")),i.type){case"wizard":a.forms.multistep.mixins.Wizard.call(a.forms.multistep.LiveForm.prototype);break;case"accordion":a.forms.multistep.mixins.Accordion.call(a.forms.multistep.LiveForm.prototype);break;case"onepage":a.forms.multistep.mixins.OnePage.call(a.forms.multistep.LiveForm.prototype);break;default:console.warn("Unsupported form type: '"+i.type+"'")}d=new a.forms.multistep.LiveForm(h,j),d.init(f,g)})},{init:c}}()}(DDIGITAL,jQuery),function(a){"use strict";a.forms=a.forms||{},a.forms.sync=function(){var b,c,d,e,f,g,h,i,j,k;return b={AJAX_TIMEOUT:1e4,AJAX_MIN_DELAY:2e3,DATA:{IS_INIT:"form-sync-is-init",SYNC:"form-sync",STATUS:"form-status",FORCE_SUBMIT:"form-sync-force-submit",REQUEST:"form-sync-request"},NEXT:{ACTIONS:{partial:function(a,b){a.trigger("next-action-partial.sync",b)},redirect:function(a,b){window.location=b.redirect},reset:function(b,c){c.reset===!0&&(b.get(0).reset(),a.forms.validate.reset(b))},submit:function(c,d){d.submit===!0&&(c.data(b.DATA.FORCE_SUBMIT,!0),a.forms.decorator.setDisabledState(c,!1),c.get(0).submit())}}},ERRORS:{CONNECTION_ERROR:{status:[{type:"warning",title:"Connection error",description:"There has been a connection error with the server. Please check your internet connection and try again."}]}}},c={SYNC_FORM:".js-validate-sync"},d=function(a){if(!a.status&&!a.next)throw new Error("DDIGITAL.forms.sync: Invalid JSON format. Expected at least a `status` or `next` item.");var c={status:!1,next:!1};if(a.status){c.status=[];for(var d=0,e=a.status.length;d<e;d+=1){var f=a.status[d],g={type:f.type||"",title:f.title||!1,description:f.description||!1,controls:[]};if(f.controls)for(var d=0,e=f.controls.length;d<e;d+=1){var h=f.controls[d],i=$("#"+h.id);0===i.length&&(i=$('[name="'+h.id+'"]')),i.length>0&&g.controls.push({element:i.get(0),message:h.message})}c.status.push(g)}}if(a.next){var j=!1;for(var k in b.NEXT.ACTIONS)b.NEXT.ACTIONS.hasOwnProperty(k)&&a.next.hasOwnProperty(k)&&(c.next=a.next,c.action=b.NEXT.ACTIONS[k],j=!0);j||console.warn("DDIGITAL.forms.sync: Invalid next action passed:",a.next)}return c},e=function(b,c,d){d=d||!1;for(var e=0,f=c.length;e<f;e+=1){var g=c[e];a.forms.decorator.formSummary.add(g.type,b,g.controls,g.title,g.description,!0,d),"error"===g.type&&a.forms.decorator.inlineErrors.add(g.controls)}},f=function(a,b,c){c=c||!1;var f=d(b);"object"==typeof b.next&&a.trigger("submit-success.sync",b.next),"function"==typeof f.action&&f.action(a,f.next),f.status!==!1&&"object"!=typeof b.next&&(a.trigger("submit-invalid.sync"),e(a,f.status,c))},g=function(c){var d=$(c);d.data(b.DATA.REQUEST)&&(d.data(b.DATA.REQUEST).abort(),d.data(b.DATA.REQUEST,!1));var e=d.data(b.DATA.SYNC),g=d.attr("method")||"post",h=d.serialize(),i=!0,k=[];d.trigger("submit-start.sync"),
setTimeout(function(){for(i=!0;k.length;)k.shift().call()},b.AJAX_MIN_DELAY),a.forms.decorator.setLoadingState(d,!0),a.forms.decorator.setDisabledState(d,!0);var l=$.ajax({timeout:b.AJAX_TIMEOUT,type:g,dataType:"json",url:e,data:h});d.data(b.DATA.REQUEST,l),l.then(function(a){i?f(d,a):k.push(function(){f(d,a)})}),l.fail(function(){i?j(d):k.push(function(){j(d)})}),l.always(function(){d.data(b.DATA.REQUEST,!1),i?(a.forms.decorator.setLoadingState(d,!1),a.forms.decorator.setDisabledState(d,!1),d.trigger("submit-end.sync")):k.push(function(){a.forms.decorator.setLoadingState(d,!1),a.forms.decorator.setDisabledState(d,!1),d.trigger("submit-end.sync")})})},i=function(c){var d=$(this),e=a.forms.validate.getValidatorFromElement(this);e.errorList.length>0||e.pendingRequest>0||d.data(b.DATA.FORCE_SUBMIT)!==!0&&(c.preventDefault(),a.forms.decorator.formSummary.remove(d),g(this))},h=function(a){var c=a.data(b.DATA.STATUS);if("undefined"!=typeof c){if("string"==typeof c&&""===c)return void console.warn("DDIGITAL.forms.sync: Empty string in `data-form-status`, ignoring.");if("string"==typeof c)throw new Error("DDIGITAL.forms.sync: Invalid JSON data entered into the `data-form-status` attribute.");f(a,c,!0)}},j=function(a){f(a,b.ERRORS.CONNECTION_ERROR),a.trigger("submit-fail.sync",b.ERRORS.CONNECTION_ERROR)},k=function(){$(c.SYNC_FORM).each(function(a,c){var d=$(c);if(d.data(b.DATA.IS_INIT)!==!0)return d.data(b.DATA.IS_INIT,!0),h(d),"string"!=typeof d.data(b.DATA.SYNC)?void console.warn("DDIGITAL.forms.sync: URL not provided, sync on submission not enabled."):void d.on("submit.ddSync",i)})},{init:k}}()}(DDIGITAL),function(a){"use strict";a.forms=a.forms||{},a.forms.validate=function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o;return b={IS_DEBUG:!1,SUMMARY:{TYPE:"error",TITLE:"There are some validation issues."}},c={ERROR:"error"},d={FORM:".js-validate",IGNORE:".v-ignore, :hidden, [disabled]",RESET:'input[type="reset"], button[type="reset"]'},e=function(b){return a.forms.decorator.getFormFromElement(b).validate()},f=function(b){var c={};return b.find(a.forms.decorator.getSelectors().CTRLS).each(function(b,d){var e=$(d),f=e.find(a.forms.decorator.getSelectors().ELEMENTS),g=f.first().attr("id"),h=[];f.each(function(a,b){h.push($(b).attr("id"))}),c[g]=h.join(" ")}),c},g=function(b){var c=!0,d=a.forms.decorator.getCtrlsInGroup(b),f=e(b);return d.each(function(a,b){var d=$(b).attr("id");f.errorMap.hasOwnProperty(d)&&(c=!1)}),c},h=function(a){var b,c=e(a);return b=$.map(c.groups,function(b,c){return c.indexOf($(a).attr("id"))>=0}),b.indexOf(!0)!==-1},l=function(a){var b=e(a);return void 0!==b.submitted[a.name]},i=function(b,c){c=c||!1,b.validate().resetForm(),c&&a.forms.decorator.formSummary.remove(b)},j=function(a){a.find("input, select, textarea").each(function(a,b){k(b)})},k=function(b){var c=$(b);if(a.forms.validate.isInGroup(b)){var d=a.forms.decorator.getCtrlsInGroup(b);d.each(function(a,b){var c=$(b);c.is(":checkbox")||c.is(":radio")?c.prop("checked",!1):c.val("")})}else c.is(":radio")||$(b).is(":checkbox")?c.prop("checked",!1):c.val("");a.forms.decorator.unhighlight(b)},m=function(b){if(a.forms.validate.isInGroup(b)){var c=a.forms.decorator.getCtrlsInGroup(b),d=!0;return c.each(function(a,b){var c=$(b);!c.is(":checkbox")&&!c.is(":radio")||c.is(":checked")?""!==c.val()&&"0"!==$.trim(c.val())&&null!==c.val()||(d=!1):d=!1}),void(d&&this.element(b))}this.checkable(b)||!l(b)&&this.optional(b)||this.element(b)},n=function(a,b){$(a).data("validation-delay",b)},o=function(e){e=e||$("body"),e.find(d.FORM).each(function(e,j){var k=$(j);k.validate({debug:b.IS_DEBUG,errorClass:c.ERROR,ignore:d.IGNORE,errorElement:"span",ignoreTitle:!0,groups:f(k),focusInvalid:!1,errorPlacement:function(b,c){a.forms.decorator.errorPlacement(b,c)},highlight:function(b){a.forms.decorator.highlight(b)},unhighlight:function(b){a.forms.decorator.unhighlight(b)},invalidHandler:function(c,d){a.forms.decorator.formSummary.add(b.SUMMARY.TYPE,$(this),d.errorList,b.SUMMARY.TITLE)},success:function(b,c){h(c)&&!g(c)||a.forms.decorator.unhighlight(b,c)},onfocusout:function(a){var b=$(a).data("validation-delay");void 0!==b&&b!==!1?setTimeout(function(){m.call(this,a)}.bind(this),b):m.call(this,a)}}),k.on("click.validate",d.RESET,function(){i(k,!0)})})},{getValidatorFromElement:e,isInGroup:h,isGroupValid:g,reset:i,resetScope:j,resetInput:k,isDirty:l,setValidationDelay:n,init:o}}()}(DDIGITAL),function(a){"use strict";a.forms=a.forms||{},a.forms.multistep=a.forms.multistep||{},a.forms.multistep.mixins=a.forms.multistep.mixins||{},a.forms.multistep.mixins.Accordion=function(){this.beforeInsertStep=function(a){a.addClass("hidden step-enter")},this.animateStepIn=function(a,b){a.removeClass("hidden step-leave step-leave-active").addClass("step-enter-active"),setTimeout(function(){b(),a.removeClass("step-enter step-enter-active")},500)},this.animateStepOut=function(a,b){a.removeClass("step-enter step-enter-active").addClass("step-leave step-leave-active"),setTimeout(function(){a.addClass("hidden").removeClass("step-leave step-leave-active"),b()},300)}}}(DDIGITAL),function(a,b){"use strict";a.forms=a.forms||{},a.forms.multistep=a.forms.multistep||{};var c,d;d={STEP:"_step",SPINNER:"spinner",IS_LOADING:"is-loading",STEPS_LIST:"step-list",STEPS_LIST_ITEM:"_step-list-item",STEP_TITLE:"_step-title",EDIT_LINK:"_edit-step"},c=function(a,c){this.$container=a,this.defaults={},this.settings=b.extend(!0,this.settings,this.defaults,c),this.currentStep=c.currentStep},c.prototype={TYPES:["wizard","accordion","stepped"],TEMPLATES:{step:['<div class="'+d.STEP+'">',"</div>"].join(""),list:'<ul class="'+d.STEPS_LIST+'" />',listItem:'<li class="'+d.STEPS_LIST_ITEM+'" />',stepTitle:['<div class="'+d.STEP_TITLE+'">',"<span>{{step.title}}</span>","</div>"].join(""),editLink:'<a href="#" class="'+d.EDIT_LINK+'">Edit</a>'},settings:{},$container:{},isLoading:!1,currentStep:{},$currentStep:{},firstRender:!0,init:function(a,b){return this.TYPES.indexOf(this.settings.form.type)===-1?(console.warn("Unsupported liveform form type '"+this.settings.type+"'"),!1):(this.service=a,this.router=b,this.currentStep=this.service.getStep(this.settings.currentStep),"accordion"===this.settings.form.type&&(this._stubSteps(),this._initStubs()),1===this.currentStep.step&&this.router.replaceState(this.currentStep),1===this.currentStep.step&&"wizard"===this.settings.form.type?(this.$currentStep=this.$container.find('[data-form-multistep-step="1"]'),this.$currentStep.data("step",this.currentStep),this._initStep(this.$currentStep),this._triggerStepChange(),this.firstRender=!1):this.settings.partial?this._buildStep(this.currentStep):console.warn("You have not declared a partial to fetch on initialisation."),this._listenForEvents(),void this._initLoader())},_initStep:function(b){var c=new a.forms.multistep.Step(b,this.$container,{});c.init(this.service),b.on("goback.step",function(a,b){this.loading.start(),this.switchStep(this.service.getStep(b.step-1))}.bind(this))},_listenForEvents:function(){this.$container.on("submit-start.sync",function(){this.loading.start(),this.$container.attr("aria-busy",!0)}.bind(this)),this.$container.on("submit-success.sync",function(a){var c=b(a.target);c.trigger("step-complete.track",{"form-id":this.service.getFormId(),"form-title":this.service.getFormTitle(),"step-title":this.currentStep.title,step:this.currentStep.step})}.bind(this)),this.$container.on("submit-invalid.sync",function(){this.loading.stop(),this.$container.attr("aria-busy",!1)}.bind(this)),this.$container.on("submit-fail.sync",function(a,b){console.log("submit fail",a,b)}.bind(this)),this.$container.on("submit-end.sync",function(){}.bind(this)),this.$container.on("next-action-partial.sync",function(){this._nextStep()}.bind(this))},_initLoader:function(){var a,b;a=function(){this.$container.addClass(d.IS_LOADING),this.$currentStep.trigger("disable.step")}.bind(this),b=function(){this.$container.removeClass(d.IS_LOADING),this.$currentStep.trigger("enable.step")}.bind(this),this.loading={start:a,stop:b}},_fetchPartial:function(b){var c=this.service.getPartial(b);return c.fail(function(){a.forms.sync.handleNetworkError(this.$currentStep.find("form"))}.bind(this)),c},_buildStep:function(a){var b;this._fetchPartial(a.partial).then(function(c){b=this._renderStep(a,c),b.data("step",a),"wizard"===this.settings.form.type?this._addStep(b,a):this._insertStepIntoStub(b,a),this._initStep(b),this._animate(this.$currentStep,b)}.bind(this))},_renderStep:function(a,c){var d=b(this.TEMPLATES.step);return d.append(c),this.beforeInsertStep(d,a),d},_addStep:function(a,b){var c=this.$container.find(".step");0===c.length?this.$container.append(a):this.currentStep.step>b.step?a.insertBefore(c):a.insertAfter(c)},_nextStep:function(){var a=this.service.getIndexFromStep(this.currentStep.step),b=this.service.getStepFromIndex(a+1);this._buildStep(b)},switchStep:function(a){this._buildStep(a)},_animate:function(a,c){var d=new jQuery.Deferred,e=new jQuery.Deferred;this.scrollToTop(),a.length?this.animateStepOut(a,function(){d.resolve()}):d.resolve(),b.when(d).done(function(){this.animateStepIn(c,function(){e.resolve()})}.bind(this)),b.when(e).done(function(){a.length&&a.trigger("destroy.step"),this._activateStep(c),this.loading.stop(),this.$container.attr("aria-busy",!1)}.bind(this))},_activateStep:function(a){var b;return this.currentStep=a.data("step"),this.$currentStep=a,this._updateEditLinkStates(),this._triggerStepChange(),this.firstRender?(this.firstRender=!1,!1):(b=this.service.getURLPathFromStep(this.currentStep.step),void this.router.navigate(b,this.currentStep))},_updateEditLinkStates:function(){var a=this.currentStep;this.$container.find("."+d.EDIT_LINK).each(function(){var c=b(this),d=c.data("step");d.displayAt<a.displayAt?c.removeClass("hidden"):c.addClass("hidden")})},_triggerStepChange:function(){this.$container.trigger("step-change.liveform",this.currentStep)},_insertStepIntoStub:function(a,b){this.$container.find("."+d.STEPS_LIST_ITEM).eq(b.displayAt-1).append(a)},_stubSteps:function(){function a(a){var c,d,e,f;f=this.TEMPLATES.stepTitle.replace("{{step.title}}",a.title),e=b(f),c=b(this.TEMPLATES.listItem),a.canEdit!==!1&&(d=b(this.TEMPLATES.editLink),d.data("step",a),d.appendTo(e)),c.append(e),c.appendTo(this.$list)}var c=this.service.getSteps(),d=0;this.$list=b(this.TEMPLATES.list);for(var e=0;e<c.length;e+=1)c[e].displayAt!==d&&a.call(this,c[e]),d=c[e].displayAt;this.$list.appendTo(this.$container)},_initStubs:function(){var a=this.$container.find("."+d.EDIT_LINK);a.on("click",function(a){a.preventDefault(),this.switchStep(b(a.currentTarget).data("step"))}.bind(this))},scrollToTop:function(){var c=b(document).scrollTop(),d=this.$container.offset().top;c>d&&a.util.scroll.page(0,null,250,function(){})},beforeInsertStep:function(){}},a.forms.multistep.LiveForm=c}(DDIGITAL,jQuery),function(a){"use strict";a.forms=a.forms||{},a.forms.multistep=a.forms.multistep||{},a.forms.multistep.mixins=a.forms.multistep.mixins||{},a.forms.multistep.mixins.OnePage=function(){this.beforeInsertStep=function(){},this.animateStepIn=function(){},this.animateStepOut=function(){}}}(DDIGITAL),function(a){"use strict";a.forms=a.forms||{},a.forms.multistep=a.forms.multistep||{},a.forms.multistep.mixins=a.forms.multistep.mixins||{},a.forms.multistep.mixins.Wizard=function(){this.beforeInsertStep=function(a){a.addClass("hidden")},this.animateStepIn=function(a,b){a.removeClass("hidden").velocity("stop").velocity({opacity:1},{easing:"easeOutQuart",duration:500,complete:b})},this.animateStepOut=function(a,b){a.velocity("stop").velocity({opacity:0},{easing:"easeOutQuart",duration:500,complete:function(){a.addClass("hidden"),b()}})}}}(DDIGITAL),function(a,b){"use strict";a.forms=a.forms||{},a.forms.multistep=a.forms.multistep||{};var c,d;d={IS_COMPLETE:"is-complete",IS_CURRENT:"is-current"},c=function(a,c){var d={onStepClick:function(){},titleFormat:"Step {{step.displayAt}} of {{totalSteps}} : {{step.title}}",displayStepTitle:!0};this.$container=a,this.initialState=this.$container.data("formProgressState"),this.initialState.indexOf("%")!==-1&&(this.type="percentage"),this.settings=b.extend(!0,this.settings,d,c)},c.prototype={TYPES:["steps","percentage"],TEMPLATES:{list:"<ul />",step:['<li class="_step">','<span class="_step-number">{{step.displayAt}}</span>','<span class="_step-title vh">{{step.title}}</span>',"</li>"].join(""),title:"<p />",bar:['<progress max="100" value="">','<div class="progress-bar">',"<span></span>","</div>","</progress>"].join("")},settings:{},type:"steps",$container:null,$list:null,currentStep:1,init:function(a){this.service=a,"steps"===this.type?(this._renderList(),this.settings.displayStepTitle===!0&&this._renderTitle()):"percentage"===this.type&&this._renderBar()},_renderBar:function(){this.$bar=b(this.TEMPLATES.bar),this.$bar.appendTo(this.$container)},_renderList:function(){var a=this.service.getSteps(),c=0;this.$list=b(this.TEMPLATES.list),this.$list.appendTo(this.$container);for(var d=0;d<a.length;d+=1)a[d].displayAt!==c&&this._renderStep(a[d]),c=a[d].displayAt;this.$steps=this.$list.children()},_renderStep:function(a){var c,d=this.TEMPLATES.step;d=d.replace("{{step.title}}",a.title),d=d.replace("{{step.displayAt}}",a.displayAt.toString()),c=b(d),c.data("step",a),this.$list.append(c)},_renderTitle:function(){var a=this.TEMPLATES.title;this.$title=b(a),this.$title.html("&nbsp;"),this.$title.appendTo(this.$container)},_updateTitle:function(a){var b=this.settings.titleFormat;b=b.replace("{{step.displayAt}}",a.displayAt.toString()).replace("{{totalSteps}}",this.$steps.length).replace("{{step.title}}",a.title),this.$title.text(b)},setState:function(a){function b(b,c){c<a.displayAt?("undefined"!=typeof b.canEdit&&b.canEdit!==!0||this._addLink(b),this._markComplete(b)):(this._removeLink(b),this._markInComplete(b))}var c;if(a.step===this.currentStep&&1!==this.currentStep)return!1;if("steps"===this.type){c=this.service.getSteps();for(var d=1;d<=c.length;d+=1){var e=c[d-1];b.call(this,e,d)}this._makeCurrent(a),this._updateTitle(a)}else console.warn("The progress bar type `percentage` is not yet supported")},_makeCurrent:function(a){this.$steps.removeClass(d.IS_CURRENT).eq(a.displayAt-1).addClass(d.IS_CURRENT),this.currentStep=a.step},_markComplete:function(a){this.$steps.eq(a.displayAt-1).addClass(d.IS_COMPLETE)},_markInComplete:function(a){this.$steps.eq(a.displayAt-1).removeClass(d.IS_COMPLETE)},_addLink:function(a){var c=b(document.createElement("a"));c.attr("href",this.service.getURLPathFromStep(a.step)).on("click",function(b){this.settings.onStepClick(b,a)}.bind(this)),this.$steps.eq(a.displayAt-1).children().wrapAll(c)},_removeLink:function(a){this.$steps.eq(a.displayAt-1).find("> a").children().unwrap("a")}},a.forms.multistep.ProgressBar=c}(DDIGITAL,jQuery),function(a,b){"use strict";a.forms=a.forms||{},a.forms.multistep=a.forms.multistep||{},a.forms.multistep.router=function(){var a,c,d,e,f,g;return c={onStateChange:function(){}},d=function(){b(window).on("popstate.multistep",function(a){f(a)})},e=function(a,b){history.pushState(b,null,a)},f=function(a){c.onStateChange(a)},g=function(a){history.replaceState(a,null,window.location.pathname)},a=function(a){return c=b.extend(!0,c,a),d(),this},{init:a,navigate:e,onStateChange:f,replaceState:g}}()}(DDIGITAL,jQuery),function(a,b){"use strict";a.forms=a.forms||{},a.forms.multistep=a.forms.multistep||{},a.forms.multistep.service=function(){var a,c,d,e,f,g,h,i,j,k,l,m;return c={timeout:1e4},d=function(a){return b.ajax({timeout:c.timeout,method:"GET",url:l(a)})},e=function(a){return m.steps[a]},f=function(a){for(var b={},c=0;c<=m.steps.length;c+=1)if(m.steps[c].step===a){b=m.steps[c];break}return b},g=function(a){for(var b=-1,c=0;c<m.steps.length;c+=1)if(m.steps[c].step===a){b=c;break}return b},l=function(a){return"/"!==a.slice(0,1)&&(a="/"+a),a},h=function(a){var b=f(a),c=m.basePath,d=c,e=!1;return 1===a?l(c):(m.hasOwnProperty("proxy")&&m.proxy===!0&&(e=!0,d=d.replace(".html","")),"/"!==c.slice(-1)&&(d+="/"),d+=b.slug,e===!0&&(d+=".html"),l(d))},i=function(){return m.steps},k=function(){return m.id},j=function(){return m.title},a=function(a,d){return c=b.extend(!0,d,c),m=a,this},{init:a,getPartial:d,getStepFromIndex:e,getStep:f,getIndexFromStep:g,getURLPathFromStep:h,getSteps:i,getFormId:k,getFormTitle:j,makeAbsolute:l}}()}(DDIGITAL,jQuery),function(a,b){"use strict";a.forms=a.forms||{},a.forms.multistep=a.forms.multistep||{};var c,d;d={BACK:"js-multistep-back"},c=function(a,c,d){this.$step=a,this.step=this.$step.data("step"),this.$container=c,this.defaults={confirmText:"Are you sure you want to navigate away from this step of the form? Changes you made will not be saved."},this.settings=b.extend(!0,this.settings,this.defaults,d)},c.prototype={settings:{},$step:null,$form:null,isDirty:!1,init:function(a){this.service=a,this.$form=this.$step.find("form"),this.$fieldsets=this.$form.find("fieldset"),this.$step.trigger("re-init-all"),this._listenForEvents(),this._initGoBack(),this._trackElements(),this._onBeforeUnload()},_listenForEvents:function(){this.$step.on("disable.step",function(){this._disable()}.bind(this)),this.$step.on("enable.step",function(){this._enable()}.bind(this)),this.$step.on("destroy.step",function(){this.destroy()}.bind(this))},_initGoBack:function(){this.$step.find("."+d.BACK).on("click",function(a){a.preventDefault(),this.isDirty?window.confirm(this.settings.confirmText)&&this.$step.trigger("goback.step",this.step):this.$step.trigger("goback.step",this.step)}.bind(this))},_trackElements:function(){function c(b){var c=new a.forms.ElementTracker(d.$form,b,{});c.init(),b.on("element-success.track",function(){d.isDirty=!0})}var d=this;this.$step.find(".ctrl-holder input, .ctrl-holder select, .ctrl-holder textarea").each(function(){c(b(this))})},_onBeforeUnload:function(){b(window).on("beforeunload.step-"+this.step.step,function(){if(this.isDirty)return""}.bind(this)),this.$form.on("submit-success.sync",function(){b(window).off("beforeunload.step-"+this.step.step)}.bind(this))},_disable:function(){this.$step.find('button[type="submit"]').each(function(){var a=b(this),c=a.prop("disabled");a.data("disabled-state",Boolean(c)),a.prop("disabled",!0)}),this.$step.find("fieldset").each(function(){var a=b(this),c=a.prop("disabled");a.data("disabled-state",Boolean(c)),a.prop("disabled",!0)})},_enable:function(){this.$container.find('button[type="submit"]').each(function(){var a=b(this),c=a.data("disabled-state");a.prop("disabled",Boolean(c)),a.removeData("disabled-state")}),this.$fieldsets.each(function(){var a=b(this),c=a.data("disabled-state");a.prop("disabled",Boolean(c)),a.removeData("disabled-state")})},destroy:function(){b(window).off("beforeunload.step-"+this.step.step),this.$step.remove()}},a.forms.multistep.Step=c}(DDIGITAL,jQuery),function(){"use strict";$.validator.addMethod("cc-cvv",function(a,b){var c=/^\d{3,4}$/;return this.optional(b)||c.test(a)},"Please enter a valid CVV code. For Mastercard or Visa, this is the last three digits in the signature area on the back of your card.")}(),function(a){"use strict";$.validator.addMethod("cc-expiry",function(b,c){var d=!1,e=a.forms.decorator.getCtrlsInGroup(c),f=parseInt(e.eq(0).val(),10),g=parseInt(e.eq(1).val(),10),h=parseInt((new Date).getMonth(),10),i=parseInt((new Date).getFullYear().toString().substr(2,2),10),j=!1;return isNaN(f)||isNaN(g)||(j=!0),j&&(g>i||g===i&&f-1>=h)&&(d=!0),d},"Please enter a valid expiry date.")}(DDIGITAL),function(){"use strict";$.validator.addMethod("cc-number",function(a,b){var c=/^\d{16}$/;return this.optional(b)||c.test(a)},"Please enter a valid credit card number.")}(),function(a){"use strict";$.validator.addMethod("required",function(b,c,d){var e,f=$(c);return e=function(b){var c=a.forms.decorator.getCtrlsInGroup(b),d=!1;return c.each(function(){var a=$(this),b=a.is(":checkbox")||a.is(":radio");return a.attr("id")===f.attr("id")||void(d=b?a.is(":checked"):null!==a.val()&&""!==$.trim(a.val()))}),d},this.depend(d,c)?!(!a.forms.validate.isInGroup(c)||!e(c))||(this.checkable(c)?this.getLength(b,c)>0:null!==b&&$.trim(b).length>0):"dependency-mismatch"},"This field is required.")}(DDIGITAL),function(a,b){"use strict";a.navOffscreen=function(){var a;return a=function(){b(".js-offscreen").ddOffscreen()},{init:a}}()}(DDIGITAL,jQuery),function(a,b){"use strict";a.navOnscreen=function(){var a;return a=function(){b(".js-onscreen").ddOnscreen({})},{init:a}}()}(DDIGITAL,jQuery);